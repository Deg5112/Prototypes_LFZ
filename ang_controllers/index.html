<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Angular Controllers</title>
    <!-- Add the AngularJS CDN below -->

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>

</head>
<body ng-app = 'myApp'>
    <div ng-controller = 'formController as fc'> <!--set which controller we'll be using-->

        <input type="text" name="firstName" ng-model="fc.curForm.fname"><br>
        <input type="text" name="lastName" ng-model="fc.curForm.lname"><br>
        <input type="email" name="email" ng-model="fc.curForm.email"><br>
        <textarea ng-model= 'fc.curForm.comments' ng-change="fc.bool = true" ng-disabled="fc.disabled"></textarea>
        <p ng-show = 'fc.bool'>{{fc.charLeft()}}</p>

        <button type="button" ng-click="fc.addStudent()">Click</button>

        <div ng-controller="tableController as tc">
            <tr>
                <tr>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Comments</th>
                    <th>operation</th>
                </tr>

                <tr ng-repeat="i in formArr">
                    <td>{{i.fname +  ' ' + i.lname}}</td>
                    <td>{{i.email}}</td>
                    <td>{{i.comments}}</td>
                    <td><button type="button" ng-click="tc.removeFromFormArray($index)">Delete</button></td>
                </tr>
            <br>
            <tr>
                <td>{{fc.curForm.fname}}</td>
                <td>{{fc.curForm.lname}}</td>
                <td>{{fc.curForm.email}}</td>
                <td>{{fc.curForm.comments}}</td>
            </tr>

            </table>
        </div>

    </div>
<script>
 var app = angular.module('myApp', []);

    app.controller('tableController', function($scope){
        this.removeFromFormArray = function(index){
            $scope.formArr.splice(index, 1);
        };
        this.totalEntriesintable = function(){

        };
    });
    app.controller('formController', function($scope){
        var self = this;
        this.bool = false;
        this.maxLength = 25;
        this.disabled = false;
        this.curForm = {

        };
        $scope.formArr = [

        ];
        this.addStudent = function(){
            console.log('hello');
            $scope.formArr.push(this.curForm);
            self.curForm = {};
            self.disabled = false;
        };
        this.charLeft = function(){
            var charLeft = self.maxLength - self.curForm.comments.length;
            if(charLeft===0){
                self.disabled = true;
            }
            return charLeft;
        };
    });

</script>
</body>
</html>


